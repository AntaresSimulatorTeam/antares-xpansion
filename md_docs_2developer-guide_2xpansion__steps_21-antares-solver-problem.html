<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Antares Xpansion" />
<meta property="og:image" content="https://github.com/AntaresSimulatorTeam/antares-xpansion/blob/develop/docs/assets/logo.png" />
<meta property="og:description" content="Investment simulations for Antares studies." />
<meta property="og:url" content="https://github.com/AntaresSimulatorTeam/antares-xpansion/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://github.com/AntaresSimulatorTeam/antares-xpansion/blob/develop/docs/assets/logo.png" />
<meta name="twitter:title" content="Antares Xpansion" />
<meta name="twitter:description" content="Investment simulations for Antares studies." />
<!-- END twitter metadata -->
<title>Antares Xpansion: Antares optimization problem retrieval</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://github.com/AntaresSimulatorTeam/antares-xpansion/ -->
<a href="https://github.com/AntaresSimulatorTeam/antares-xpansion" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Antares Xpansion
   </div>
   <div id="projectbrief">Investment simulations for Antares studies</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2developer-guide_2xpansion__steps_21-antares-solver-problem.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Antares optimization problem retrieval</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md98"></a> In this step, <code>antares-solver</code> runs the Antares study with a specific configuration set by Antares-Xpansion and writes the weekly optimization problems as <code>.mps</code> files. More precisely, <code>antares-solver</code> performs two successive optimizations, see <a href="https://antares-simulator.readthedocs.io/en/latest/reference-guide/08-miscellaneous/#antares-at-one-glance">Antares-Simulator reference guide</a>:</p>
<ol type="1">
<li>A linear relaxation of the Antares MILP problem is solved where the on/off variables of thermal clusters are continuous.</li>
<li>A heuristic search for integer values of these variables, satisfying the dynamic constraint of the system with the smallest possible cost is then carried out. Finally, a second linear optimization with the integer variables set to the previously found values is performed.</li>
</ol>
<p>In Antares-Xpansion, the weekly problems solved in the first optimization step are written as <code>.mps</code> files, the files generated by the second optimization are discarded. Some additional files (<code>variable.txt</code>, <code>area.txt</code> and <code>interco.txt</code>) are also generated to map the variables of the Antares optimization problems to their phhysical meaning.</p>
<h1><a class="anchor" id="autotoc_md99"></a>
Specific configuration for Antares-Xpansion</h1>
<p>In order to run the Antares study correctly, some specific simulation options are required. The Python orchestrator changes the file <code>settings/generaldata.ini</code>, with some settings depending on the <code>uc_type</code> parameter defined in the <code>user/expansion/settings.ini</code> file.</p>
<ul>
<li><p class="startli">If <code>uc_type = expansion_fast</code>, the following settings are used:</p>
<div class="fragment"><div class="line">[optimization]</div>
<div class="line">include-exportmps = true</div>
<div class="line">include-exportstructure = true</div>
<div class="line">include-tc-minstablepower = false</div>
<div class="line">include-tc-min-ud-time = false</div>
<div class="line">include-dayahead = false</div>
<div class="line">[general]</div>
<div class="line">mode = Economy</div>
<div class="line">[other preferences]</div>
<div class="line">unit-commitment-mode = fast</div>
</div><!-- fragment --></li>
<li><p class="startli">If <code>uc_type = expansion_accurate</code>, the following settings are used:</p>
<div class="fragment"><div class="line">[optimization]</div>
<div class="line">include-exportmps = true</div>
<div class="line">include-exportstructure = true</div>
<div class="line">include-tc-minstablepower = true</div>
<div class="line">include-tc-min-ud-time = true</div>
<div class="line">include-dayahead = true</div>
<div class="line">[general]</div>
<div class="line">mode = expansion</div>
<div class="line">[other preferences]</div>
<div class="line">unit-commitment-mode = accurate</div>
</div><!-- fragment --></li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameters   </th><th class="markdownTableHeadNone">Remark    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>include-exportmps</code>   </td><td class="markdownTableBodyNone">Ask for export of <code>.mps</code> files.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>include-exportstructure</code>   </td><td class="markdownTableBodyNone">Ask for export of structure files : <code>variables.txt</code>, <code>area.txt</code>, <code>interco.txt</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>include-tc-minstablepower</code>   </td><td class="markdownTableBodyNone">Enable constraints on minimum stable power for thermal clusters.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>include-tc-min-ud-timer</code>   </td><td class="markdownTableBodyNone">Enable constraints on minimum up and down times for thermal clusters.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>include-dayahead</code>   </td><td class="markdownTableBodyNone">Enable day ahead reserves (i.e. limitation of the maximum production power in order to be able to react to infraday unexpected events).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>mode</code>   </td><td class="markdownTableBodyNone">Sets the Antares simulation mode.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit-commitment-mode</code>   </td><td class="markdownTableBodyNone">Sets the Antares unit-commitment mode, see <a href="https://antares-simulator.readthedocs.io/en/latest/reference-guide/08-miscellaneous/#the-unit-commitment-mode-advanced-parameter">the unit-commitment mode of Antares-Simulator</a>.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md100"></a>
Output files</h1>
<p>After the Antares simulation, some output files of interest for Antares-Xpansion are generated.</p>
<h2><a class="anchor" id="autotoc_md101"></a>
&lt;tt&gt;.mps&lt;/tt&gt; files for the weekly optimization problems</h2>
<p>For each week and Monte-Carlo year, one <code>.mps</code> file is generated, encoding the linear problem that is solved by Antares-Simulator.</p>
<p>File name formatting: <code>problem-&lt;mc_year&gt;-&lt;week&gt;-&lt;timestamp&gt;.mps</code>.</p>
<p>!!! Example <code>problem-1-1-20210928-155703.mps</code> represents the weekly problem for MC year 1 and week 1 generated on 2021/09/28 at 15h57m03s.</p>
<h2><a class="anchor" id="autotoc_md102"></a>
&lt;tt&gt;variables.txt&lt;/tt&gt; file for each &lt;tt&gt;.mps&lt;/tt&gt; file</h2>
<p>Each <code>.mps</code> file has a corresponding <code>variable.txt</code> file that allows to map each variable number of the <code>.mps</code> file to its physical representation.</p>
<p>File name formatting :<code>variables-&lt;mc_year&gt;-&lt;week&gt;-&lt;timestamp&gt;.txt</code></p>
<p>!!! Example <code>variables-1-1-20210928-155703.txt</code> represents the variable names of the problem for MC year 1 and week 1 generated on 2021/09/28 at 15h57m 03s.</p>
<p>The <code>variable.txt</code> file contains one line for each variable (i.e. column) in the weekly problem encoded in the corresponding <code>.mps</code> file. In the <code>.mps</code> file the variables are named <code>Cxxxxxxx</code> where <code>xxxxxxx</code> is the number of the variable.</p>
<p>The line content depends on the type of variable (if it is related to a country or not).</p>
<p>!!! Example For <code>462 ValeurDeNTCOrigineVersExtremite 0 0 14</code>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Parameter    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>462</code>   </td><td class="markdownTableBodyNone">Column ID in the <code>.mps</code> weekly problem.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ValeurDeNTCOrigineVersExtremite</code>   </td><td class="markdownTableBodyNone">Column physical name.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone">Country.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone">Link ID.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>14</code>   </td><td class="markdownTableBodyNone">Time step.   </td></tr>
</table>
<p>As the weekly problem is solved with an hourly time step, each physical variable is present 168 times. The time steps are numbered with reference to the first hour of the year.</p>
<p>!!! Example For the problem of week 2, the variable <code>ValeurDeNTCOrigineVersExtremite 0 0</code> is present 168 times, with time steps ranging from 168 to 335.</p>
<h2><a class="anchor" id="autotoc_md103"></a>
The file &lt;tt&gt;area.txt&lt;/tt&gt;</h2>
<p>One file that contains the name of the areas of the Antares study is produced by <code>antares-solver</code>.</p>
<p>File name formatting: <code>area-&lt;mc_year&gt;-&lt;week&gt;-&lt;timestamp&gt;.txt</code>.</p>
<p>Because the areas do not change in each MC year or week, the file is created only for the first MC year and week simulated. The file contains one line for each area.</p>
<p>!!! Example <code> area1 area2 flex peak pv semibase </code></p>
<h2><a class="anchor" id="autotoc_md104"></a>
The file &lt;tt&gt;interco.txt&lt;/tt&gt;</h2>
<p>One file that describes the links of the Antares study is produced by <code>antares-solver</code>.</p>
<p>File name formatting: <code>interco-&lt;mc_year&gt;-&lt;week&gt;-&lt;timestamp&gt;.txt</code>.</p>
<p>Because the links do not change in each MC year or week, the file is created only for the first MC year and week simulated. The file contains one line for each link.</p>
<p>!!! Example The line <code> 3 1 2 </code> in <code>interco.txt</code> means that <code> link_id = 3 index_area_origin = 1 index_area_extremite = 2 </code></p>
<p>The index is a match to the index in the <code>area.txt</code> file. So for this example, the <code>link_id 3</code> matches the link between <code>area2</code> (area id 1) and <code>flex</code> (area id 2). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
