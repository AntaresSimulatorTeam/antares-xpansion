<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Antares Xpansion" />
<meta property="og:image" content="https://github.com/AntaresSimulatorTeam/antares-xpansion/blob/develop/docs/assets/logo.png" />
<meta property="og:description" content="Investment simulations for Antares studies." />
<meta property="og:url" content="https://github.com/AntaresSimulatorTeam/antares-xpansion/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://github.com/AntaresSimulatorTeam/antares-xpansion/blob/develop/docs/assets/logo.png" />
<meta name="twitter:title" content="Antares Xpansion" />
<meta name="twitter:description" content="Investment simulations for Antares studies." />
<!-- END twitter metadata -->
<title>Antares Xpansion: Settings of the algorithm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://github.com/AntaresSimulatorTeam/antares-xpansion/ -->
<a href="https://github.com/AntaresSimulatorTeam/antares-xpansion" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Antares Xpansion
   </div>
   <div id="projectbrief">Investment simulations for Antares studies</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_user_guide_get_started_settings_definition.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Settings of the algorithm </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >In order to solve the investment problem defined by an Antares study and its associated <code>candidates.ini</code> file, Antares-Xpansion uses the <a class="el" href="md_docs_user_guide_optimization_principles_investment_problem.html">Benders decomposition algorithm</a>. The simulation options and algorithmic parameters are defined in the <code>settings.ini</code> file, located in the folder <code>user/expansion/</code> of the Antares study.</p>
<p >The following section lists the configurable parameters. If the user does not specify the value of a parameter, its default value is used.</p>
<h1><a class="anchor" id="autotoc_md170"></a>
Overview of the &lt;tt&gt;settings.ini&lt;/tt&gt; file</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Default value   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">`optimality_gap`   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">Tolerance on absolute gap    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">`relative_gap`   </td><td class="markdownTableBodyNone"><code>1e-6</code>   </td><td class="markdownTableBodyNone">Tolerance on relative gap    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">`max_iteration`   </td><td class="markdownTableBodyNone"><code>+Inf</code>   </td><td class="markdownTableBodyNone">Maximum number of Benders iterations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">`timelimit`   </td><td class="markdownTableBodyNone"><code>1e12</code>   </td><td class="markdownTableBodyNone">Timelimit (in seconds) of the Benders step    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">`uc_type`   </td><td class="markdownTableBodyNone"><code>expansion_fast</code>   </td><td class="markdownTableBodyNone">Unit-commitment type used by Antares    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">`master`   </td><td class="markdownTableBodyNone"><code>integer</code>   </td><td class="markdownTableBodyNone">Resolution mode of the master problem    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">`yearly-weights`   </td><td class="markdownTableBodyNone"><code>None</code>   </td><td class="markdownTableBodyNone">Path of the Monte-Carlo weights file    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">`solver`   </td><td class="markdownTableBodyNone"><code>Cbc</code>   </td><td class="markdownTableBodyNone">Name of the solver    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">`log_level`   </td><td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone">Logs severity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">`additional-constraints`   </td><td class="markdownTableBodyNone"><code>None</code>   </td><td class="markdownTableBodyNone">Path of the additional constraints file    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">`separation_parameter`   </td><td class="markdownTableBodyNone"><code>0.5</code>   </td><td class="markdownTableBodyNone">Step size for the in-out separation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">`relaxed_optimality_gap`   </td><td class="markdownTableBodyNone"><code>1e-5</code>   </td><td class="markdownTableBodyNone">Threshold to switch from relaxed to integer master    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">`batch_size`   </td><td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone">Number of subproblems per batch   </td></tr>
</table>
<p >The format is a standard <code>.ini</code> and should follow this template: </p><div class="fragment"><div class="line">uc_type = expansion_fast</div>
<div class="line">master = integer</div>
<div class="line">optimality_gap = 0</div>
<div class="line">max_iteration = 100</div>
<div class="line">timelimit = 300</div>
<div class="line">additional-constraints = constraint.txt</div>
<div class="line">log_level = 0</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md171"></a>
Details of the parameters</h1>
<h2><a class="anchor" id="autotoc_md172"></a>
&lt;tt&gt;optimality_gap&lt;/tt&gt;</h2>
<p >Positive float. Default value: <code>1</code>.</p>
<p >The <code>optimality_gap</code>, defined in euros, is the tolerance on the absolute gap for the Antares-Xpansion algorithm.</p>
<p >At each iteration, the algorithm computes upper and lower bounds on the optimal cost. The algorithm stops as soon as the quantity <code>best_upper_bound - best_lower_bound</code> falls below <code>optimality_gap</code>. The solution returned by the algorithm has a cost equal to <code>best_upper_bound</code>, which is guaranteed to be within <code>optimality_gap</code> euros of the optimal cost.</p>
<ul>
<li>If <code>optimality_gap = 0</code>, Antares-Xpansion will continue its search until the optimal solution of the investment problem is found.</li>
<li>If <code>optimality_gap &gt; 0</code>, the search will stop as soon as <code>best_upper_bound - best_lower_bound &lt; optimality_gap</code>.</li>
</ul>
<p ><img src="../../assets/media/image16.png" alt="" class="inline"/></p>
<p ><b>Figure 10</b> – Illustration of the optimality gap and the set of solutions that can be returned by the package when the gap is strictly positive.</p>
<p >The interest of a strictly positive <code>optimality_gap</code> is that it speeds up the search by stopping as soon as a "good" solution is found.</p>
<p >The interpretation of this stopping criterion is not always obvious. It certainly guarantees that a solution found by the algorithm has a cost that is close to the optimum, but it does not provide any information on the distance (in MW) between the installed capacities of this solution and those of the optimal solution: if the cost function is relatively flat around the optimum, solutions whose costs are close may have significantly different installed capacities (see <b>Figure 10</b>).</p>
<p ><b>Which settings should I use for the</b> <code>optimality_gap</code>?</p>
<ol type="1">
<li>I have to run several expansion optimizations of different variants of a study and compare them. In that case, if the optimal solutions are not returned by the package, the comparison of several variants can be tricky. The inaccuracy of the method might indeed be of the same order of magnitude as the changes brought by the input variations. It is therefore advised to be as closed as possible from the optimum of the expansion problem. To do so, we advise to set the <code>optimality_gap</code> to zero.</li>
<li>I am building one consistent generation/transmission scenario. As the optimal solution is not more realistic than an approximate solution of the modelled expansion problem, the settings can be less constraining with an <code>optimality_gap</code> of a few million euros.</li>
</ol>
<h2><a class="anchor" id="autotoc_md173"></a>
&lt;tt&gt;relative_gap&lt;/tt&gt;</h2>
<p >Positive float. Default value: <code>1e-6</code>.</p>
<p >The <code>relative_gap</code> parameter is the tolerance on the relative gap for the Antares-Xpansion algorithm.</p>
<p >At each iteration, the algorithm computes upper and lower bounds on the optimal cost. The algorithm stops as soon as the quantity <code>(best_upper_bound - best_lower_bound) / max(|best_upper_bound|, |best_lower_bound|)</code> falls below <code>relative_gap</code>. For a relative gap \(\alpha\), the cost of the solution returned by the algorithm satisfies:</p>
<p >$$\frac{{\scriptstyle\texttt{xpansion solution cost}} - {\scriptstyle\texttt{optimal cost}}}{{\scriptstyle\texttt{optimal cost}}} &lt; \alpha .$$</p>
<p >!!! Remark The algorithm stops as soon as the first criterion among <code>optimality_gap</code> and <code>relative_gap</code> is met. Keep in mind that if either parameter is not specified by the user, the default value is used.</p>
<h2><a class="anchor" id="autotoc_md174"></a>
&lt;tt&gt;max_iteration&lt;/tt&gt;</h2>
<p >Strictly positive integer or infinite. Default value: <code>+Inf</code>.</p>
<p >Maximum number of iterations for the Benders decomposition algorithm. Once this number of iterations is reached, the Antares-Xpansion algorithm ends, regardless of the quality of the solution.</p>
<h2><a class="anchor" id="autotoc_md175"></a>
&lt;tt&gt;timelimit&lt;/tt&gt;</h2>
<p >Strictly positive integer. Default value: <code>1e12</code>.</p>
<p >Maximum allowed time in seconds for the execution of the Benders step of Antares-Xpansion (i.e. the time of the initial Antares simulation and for the problem generation step is not accounted for). Once the timelimit is reached, the algorithm finishes the current Benders iteration - which can take several additional seconds or minutes - and terminates.</p>
<h2><a class="anchor" id="autotoc_md176"></a>
&lt;tt&gt;uc_type&lt;/tt&gt;</h2>
<p >Possible values: <code>expansion_fast</code> and <code>expansion_accurate</code>. By default: <code>expansion_fast</code>.</p>
<p >The <code>uc_type</code> (unit-commitment type) parameter specifies the simulation mode used by Antares to evaluate the operating costs of the electrical system:</p>
<ul>
<li>If <code>uc_type = expansion_fast</code>: the <em>fast</em> mode of Antares is used, deactivating the flexibility constraints of the thermal units (Pmin constraints and minimum up and down times), and not taking into account either the start-up costs or the impact of the day-ahead reserve.</li>
<li>If <code>uc_type = expansion_accurate</code>: the <em>expansion</em> mode of Antares is used. This simulation mode corresponds to the <em>accurate</em> mode of Antares in which the unit-commitment variables are relaxed. The flexibility constraints of the thermal units as well as the start-up costs are taken into account.</li>
</ul>
<h2><a class="anchor" id="autotoc_md177"></a>
&lt;tt&gt;master&lt;/tt&gt;</h2>
<p >Possible values: <code>integer</code> and <code>relaxed</code>. By default: <code>integer</code>.</p>
<p >The <code>master</code> parameter provides information on how integer variables are taken into account in the Antares-Xpansion master problem.</p>
<ul>
<li>If <code>master = relaxed</code>: the integer variables are relaxed, and the level constraints of the investment candidates (cf. <a href="candidate-definition.md#unit-size"><code>unit-size</code></a>) will not be necessarily respected. The master problem is linear.</li>
<li>If <code>master = integer</code>: the investment problem is solved by taking into account <a href="candidate-definition.md#unit-size"><code>unit-size</code></a> constraints of the candidates. The master problem is a MILP (Mixed-Integer Linear Program).</li>
</ul>
<p >For problems with several investment candidates with large <code>max-units</code>, using <code>master = relaxed</code> can accelerate the Antares-Xpansion algorithm very significantly.</p>
<h2><a class="anchor" id="autotoc_md178"></a>
&lt;tt&gt;yearly-weights&lt;/tt&gt;</h2>
<p >String, specifying the name of a file. Default: <code>None</code>.</p>
<p >The parameter <code>yearly-weights</code> allows to assume that the Monte Carlo years simulated in the Antares study are not equally probable. The most representative years may be given greater weight than those that are less representative. The <code>yearly-weights</code> parameter defines a file that stores a vector \(\left( \omega_{1},\ldots,\omega_{n} \right)\), with \(n\) the number of Monte-Carlo years in the study, which is used to evaluate the expected production cost:</p>
<p >$$ \mathbb{E}\left(\text{cost}\right) = \frac{\sum_{i = 1}^{n}{\omega_i\text{cost}_i}}{\sum_{i = 1}^{n}\omega_{i}} \ , $$</p>
<p >with \(\text{cost}_{i}\) the production cost of the \(i\)-th Monte Carlo year and \(\omega_i\) the associated weigth.</p>
<p >The file defined by the <code>yearly-weights</code> parameter must be located in the <code>user/expansion/weights</code> folder of the Antares study. It must contain a column with as many numerical values as there are Monte-Carlo years in the Antares study. The value of the \(i\)-th row is the weight \(\omega_i\) of the \(i\)-th Monte Carlo year (see <b>Figure 11</b>).</p>
<p ><code>user/expansion/settings.ini</code> </p><div class="fragment"><div class="line">uc_type = expansion_accurate</div>
<div class="line">master = integer</div>
<div class="line">optimality_gap = 0</div>
<div class="line">yearly-weights = weights.txt</div>
</div><!-- fragment --><p ><code>user/expansion/weights/weights.txt</code></p>
<p ><img src="../../assets/media/image17.png" alt="" class="inline"/></p>
<p ><b>Figure 11</b> – Example of a setting of Antares-Xpansion with Monte-Carlo years that are not equally-weighted.</p>
<p >If the <code>yearly-weights</code> parameter is not used, the Monte-Carlo years of the Antares study are considered to be equally-weighted.</p>
<p >The <code>yearly-weights</code> parameter <b>must be set in line with the Antares study playlist by the user</b>: years with zero weights must be removed from the Antares study playlist in order not to be simulated unnecessarily.</p>
<h2><a class="anchor" id="autotoc_md179"></a>
&lt;tt&gt;solver&lt;/tt&gt;</h2>
<p >String. Default value: <code>Cbc</code>.</p>
<p >Defines the solver that is used to solve the master and the subproblems in the <a class="el" href="md_docs_user_guide_optimization_principles_investment_problem.html">Benders decomposition</a>. The user can either write <code>solver = Cbc</code> or <code>solver = Coin</code> to use the COIN-OR optimization suite. These settings are identical: depending on whether the problem has integer variables, Antares-Xpansion calls either the linear solver (<a href="https://github.com/coin-or/Clp">Clp</a>) or the MILP solver (<a href="https://github.com/coin-or/Cbc">Cbc</a>) of the COIN-OR optimization suite.</p>
<p >!!! Remark In Antares-Xpansion, the subproblems are always linear. If <code>master = relaxed</code>, the master problem is linear as well, whereas if <code>master = integer</code>, the master problem is a MILP.</p>
<p >To use another solver, you have to build the package with the chosen solver, please contact us. It’s not possible to put it on github for the moment.</p>
<h2><a class="anchor" id="autotoc_md180"></a>
&lt;tt&gt;log_level&lt;/tt&gt;</h2>
<p >Possible values :<code>{0, 1, 2}</code>, specifying the <code>solver</code>'s log severity. Default value: <code>0</code>.</p>
<p >Logs can be printed both in the console and in a file. There are 3 types of logs:</p>
<ul>
<li><b>Operational</b>: Displays progress information for the investment on candidates and costs,</li>
<li><b>Benders</b>: Displays information on the progress of the Benders algorithm,</li>
<li><b>Solver</b>: Logs of the solver called for the resolution of each master or subproblem.</li>
</ul>
<p >The table below details the behavior depending on the <code>log_level</code>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"><b>Operational</b>   </th><th class="markdownTableHeadNone"><b>Benders</b>   </th><th class="markdownTableHeadNone"><b>Solver</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>File</b>   </td><td class="markdownTableBodyNone">Always <code>(reportbenders.txt)</code>   </td><td class="markdownTableBodyNone">Always <code>(benders_solver.log)</code>   </td><td class="markdownTableBodyNone">2 <code>(solver_log_proc_&lt;proc_num&gt;.txt)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Console</b>   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">&gt;= 1   </td><td class="markdownTableBodyNone">Never   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md181"></a>
&lt;tt&gt;additional-constraints&lt;/tt&gt;</h2>
<p >String, specifying the name of a file. Default: <code>None</code>.</p>
<p >The file defined by the <code>additional-constraints</code> parameter must be located in the <code>user/expansion/constraints</code> folder of the Antares study. It allows to impose linear constraints between the invested capacities of investment candidates. These linear constraints will be added to the master problem.</p>
<p >The syntax of the <code>additional-constraints</code> file is illustrated on <b>Figure 12</b>. The format is inspired by Antares' binding constraints.</p>
<p ><code>user/expansion/settings.ini</code> </p><div class="fragment"><div class="line">uc_type = expansion_accurate</div>
<div class="line">master = integer</div>
<div class="line">optimality_gap = 0</div>
<div class="line">additional-constraints = constraints.txt</div>
</div><!-- fragment --><p ><code>user/expansion/constraints/constraints.txt</code></p>
<p ><img src="../../assets/media/image18.png" alt="" class="inline"/></p>
<p ><b>Figure 12</b> – Example of an additional constraints file.</p>
<p >A constraint in the <code>additional-constraints</code> is defined with the following parameters:</p>
<ul>
<li><code>name</code>: String. The constraint name must be unique and must not contain any special symbols or space.</li>
<li><code>&lt;investment-candidate-name&gt;</code>: Float. Coefficient of the left-hand side variable corresponding to <code>&lt;investment-candidate-name&gt;</code>.</li>
<li><code>sign</code>: Either <code>less_or_equal</code>, <code>equal</code> or <code>greater_or_equal</code>. Defines the relationship between the left-hand side and right-hand side of the constraint.</li>
<li><code>rhs</code>: Float. Right-hand side of the constraint.</li>
</ul>
<p >The user can also optionally use binary constraints to represent, for example, exclusion constraints. In <b>Figure 13</b>, Antares-Xpansion cannot invest in <code>semibase</code> and <code>peak</code> at the same time, but it can invest in neither.</p>
<p >!!! Warning The use of binary variables is not recommended as it greatly increases the calculation time.</p>
<p ><img src="../../assets/media/image19.png" alt="" class="inline"/></p>
<p ><b>Figure 13</b> – Example of an additional constraint file.</p>
<h2><a class="anchor" id="autotoc_md182"></a>
&lt;tt&gt;separation_parameter&lt;/tt&gt;</h2>
<p >Float in \([0,1]\). Default value: <code>0.5</code>.</p>
<p >Defines the step size for the in-out separation. If \(x_{in}\) is the current best feasible solution and \(x_{out}\) is the master solution at the current iteration, the investment in the subproblems is set to</p>
<p >$$ x_{cut} = {\small \texttt{separation parameter}} * x_{out} + (1 - {\small \texttt{separation parameter}}) * x_{in} .$$</p>
<p >The in-out stabilisation technique is used in order to speed up the Benders decomposition. When <code>separation_parameter &lt; 1</code>, it is necessary to relax the master problem in the first iterations as the cut point \(x_{cut}\) is a convex combination of the best feasible solution and of the solution of the master problem. In the case where <code>master = integer</code>, the algorithm proceeds as follows:</p>
<ol type="1">
<li>Solve the first iterations with the relaxed formulation using the in-out stabilisation technique,</li>
<li>Once the gap is <em>sufficiently small</em> (see `relaxed_optimality_gap`), switch back to the integer formulation and set back <code>separation_parameter = 1</code> i.e. use the classical Benders algorithm.</li>
</ol>
<h2><a class="anchor" id="autotoc_md183"></a>
&lt;tt&gt;relaxed_optimality_gap&lt;/tt&gt;</h2>
<p >Positive float. Default value: <code>1e-5</code>.</p>
<p >The <code>relaxed_optimality_gap</code> parameter only has effect when <code>master = integer</code>. In this case, the master problem is relaxed in the first iterations. The <code>relaxed_optimality_gap</code> is the threshold from which to switch back from the relaxed to the integer master formulation.</p>
<p >In the first iterations, the algorithm computes upper and lower bounds on the optimal cost of the relaxed master problem. The algorithm switches to the integer formulation as soon as the quantity <code>(best_upper_bound - best_lower_bound) / best_upper_bound</code> falls below <code>relaxed_optimality_gap</code>. For the subsequent iterations, the best upper bound is reset to \(+\infty\) as the solutions of the relaxed problem are not feasible for the integer formulation.</p>
<h2><a class="anchor" id="autotoc_md184"></a>
&lt;tt&gt;batch_size&lt;/tt&gt;</h2>
<p >Positive integer. Default value: <code>0</code>.</p>
<p >This parameter is used only when <code>--method</code> is <code>benders_by_batch</code>, otherwise it has no effect. The <code>batch_size</code> specifies the number of subproblems per batch. If set to <code>0</code>, then all subproblems are in the same batch. In this case, the Benders by batch algorithm is launched with a single batch, which is mathematically equivalent to the classical Benders algorithm. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
